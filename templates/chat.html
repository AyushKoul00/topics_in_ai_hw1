{% extends "base.html" %}

{% block title %}Chat with My Resume - Ayush Koul{% endblock %}

{% block content %}
<main class="flex-1 py-12">
  <div class="max-w-2xl mx-auto px-4">
    <h1 class="text-4xl font-bold mb-6">Chat with My Resume</h1>
    <!-- Chat Interface -->
    <div class="border border-border rounded-lg p-4">
      <!-- Chat messages will go here -->
      <div id="chat-messages" class="space-y-4 h-64 overflow-y-auto">
        <!-- Placeholder for chat messages -->
      </div>
      <!-- Chat Input -->
      <form id="chat-form" class="mt-4 flex">
        <input type="text" id="chat-input" name="message" placeholder="Type your message..." class="flex-1 border border-border rounded-l-lg px-3 py-2 bg-white text-black dark:bg-gray-800 dark:text-white focus:outline-none focus:ring-primary focus:border-primary">
        <button type="submit" class="px-4 py-2 bg-primary text-primary-foreground rounded-r-lg hover:bg-primary-foreground hover:text-primary transition-colors duration-200">Send</button>
      </form>      
    </div>
  </div>
</main>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
      // Chat functionality
      const chatForm = document.getElementById('chat-form');
      const chatInput = document.getElementById('chat-input');
      const chatMessages = document.getElementById('chat-messages');

      chatForm.addEventListener('submit', function(event) {
          event.preventDefault(); // Prevent form from submitting

          const userMessage = chatInput.value.trim();
          if (userMessage) {
              // Display user message
              const userMessageDiv = document.createElement('div');
              userMessageDiv.classList.add('flex', 'justify-end');
              userMessageDiv.innerHTML = `<div class="bg-primary text-primary-foreground rounded-lg p-2">${userMessage}</div>`;
              chatMessages.appendChild(userMessageDiv);

              // Clear input
              chatInput.value = '';
              chatMessages.scrollTop = chatMessages.scrollHeight;

              // Simulate bot response
              setTimeout(() => {
                  const botMessageDiv = document.createElement('div');
                  botMessageDiv.classList.add('flex');
                  botMessageDiv.innerHTML = `<div class="bg-muted rounded-lg p-2">This is a placeholder response related to my resume.</div>`;
                  chatMessages.appendChild(botMessageDiv);
                  chatMessages.scrollTop = chatMessages.scrollHeight;
              }, 1000);
          }
      });
  });
</script>
{% endblock %}
